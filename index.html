<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>blog-Chou - 再学一点点</title><meta name="keywords" content="C++,Unity,算法,图形学"><meta name="author" content="Chou"><meta name="copyright" content="Chou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="这个人很懒，什么也没有写~">
<meta property="og:type" content="website">
<meta property="og:title" content="blog-Chou">
<meta property="og:url" content="https://github.com/zYidian/zYidian.github.io/index.html">
<meta property="og:site_name" content="blog-Chou">
<meta property="og:description" content="这个人很懒，什么也没有写~">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img1.baidu.com/it/u=223483055,1110828441&fm=253&fmt=auto&app=138&f=JPEG?w=400&h=400">
<meta property="article:author" content="Chou">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="Unity">
<meta property="article:tag" content="算法">
<meta property="article:tag" content="图形学">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img1.baidu.com/it/u=223483055,1110828441&fm=253&fmt=auto&app=138&f=JPEG?w=400&h=400"><link rel="shortcut icon" href="/media/favicon.png"><link rel="canonical" href="https://github.com/zYidian/zYidian.github.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'blog-Chou',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-07-08 17:38:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img1.baidu.com/it/u=223483055,1110828441&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=400&amp;h=400" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/media/bg.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">blog-Chou</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">blog-Chou</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:a790623778@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/blog/Json%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/" title="Json数据持久化">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Json数据持久化"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/Json%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/" title="Json数据持久化">Json数据持久化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-07-06T13:33:49.000Z" title="发表于 2022-07-06 21:33:49">2022-07-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Unity/">Unity</a></span></div><div class="content">Json配置规则Json格式是一种键值对结果
Json的语法规则
符号含义：

大括号 {} 中间包裹的内容一般代表对象
中括号 [] 数组
冒号 :    表示键值对的对应关系，左侧是键，右侧是值
逗号 ,  表示数据分割
双引号 “” 键名/字符串

12345678910//大括号包裹的就是一个对象&#123;	&quot;name&quot;:&quot;孙悟空&quot;,	&quot;age&quot; : 1000,	&quot;sex&quot; : true,	&quot;ids&quot; : [1,2,3,4],	&quot;students&quot; : [&#123;&quot;name&quot;:&quot;小红&quot;,&quot;age&quot;:10,&quot;sex&quot;:false&#125;,					&#123;&quot;name&quot;:&quot;小明&quot;,&quot;age&quot;:10,&quot;sex&quot;:false&#125;],	&quot;dic&quot;: &#123;&quot ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/blog/Unity-Demo/" title="Unity-Demo">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-Demo"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/Unity-Demo/" title="Unity-Demo">Unity-Demo</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-07-04T23:29:10.000Z" title="发表于 2022-07-05 07:29:10">2022-07-05</time></span></div><div class="content">JUMP_DEMO01 使用Tilemap编辑地图使用Tilemap绘制背景图
1、先在Window-2D-Tile Palette 中创建调色板窗口
2、点击左边的Create New Palette，然后选择一个保持路径
3、将背景图的Pixels Per Unit 改为16，适应16像素网格大小
4、将所需要的资源拖入到Palette窗口中
5、在Hierarchy窗口，右键创建2Dobject-Tilemap
5、在调色板窗口点击Edit，启用编辑窗口
6、然后用调色板窗口中的吸管工具，在Scene窗口进行绘制

使用Tilemap绘制地形
1、点击Create New Palette，新建一个调色板用来绘画地形
2、将地形图的Pixels Per Unit 改为16
3、再将地形图导入新建的调色板
4、创建一个2Dobject-Tilemap，用来在上面绘制地形
5、点击Edit启用编辑调色板编辑窗口
6、使用吸管工具在Scene窗口进行绘制

注意：如果素材没有事先切好，则需要自己手动在Sprite Editor里面切割

1、选中素材，将其Sprite Mode 改为 M ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/blog/Unity-UGUI-Demo/" title="Unity-UGUI_Demo">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-UGUI_Demo"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/Unity-UGUI-Demo/" title="Unity-UGUI_Demo">Unity-UGUI_Demo</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-29T13:23:20.000Z" title="发表于 2022-06-29 21:23:20">2022-06-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Unity/">Unity</a></span></div><div class="content">准备工作
创建一些重要的文件夹

Resources文件夹用于动态加载
StreamingAssets文件夹用于存放Json数据文件
ArtRes文件夹存放艺术资源


导入Json相关脚本

导入Json脚本后会自动创建Scripts文件夹


将UI资源导入ArtRes文件夹

创建Canvas画布对象


将场景名改为LoginScene用于登入场景
随便创建一个UI对象，然后将其删除，只保留它的父对象Canvas
如果有3D模型或粒子特效要显示在前面，要将Canvas组件中的Render Mode 改为 Camera模式
然后在场景当中 右键创建一个摄像机，然后将其Culling Mask参数只渲染UI层。再将其Clear Flags参数只渲染Depth only当前层级。最后移除该摄像机上的Audio Listener组件(该组件只能有一个)
选中主摄像机，让其Culling Mask参数不渲染UI层。再将其Clear Flags参数设置为Solid Color,再将背景色设置为纯黑色
将UI摄像机关联到摄像机模式上，摄像机渲染模式相关内容即可完成


拼面板之前要设置Can ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/blog/C-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85/" title="C#知识点补充">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C#知识点补充"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/C-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85/" title="C#知识点补充">C#知识点补充</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-19T12:02:04.000Z" title="发表于 2022-06-19 20:02:04">2022-06-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85/">C#知识点补充</a></span></div><div class="content">值类型和引用类型在C#中变量的类型可以分为 值类型和引用类型
值类型的数据存放在栈中，表示实际的数据，继承自System.ValueType,栈中内存自动释放。
基本的数据类型和结构体 就是属于值类型
引用类型的数据存储在堆中，该变量存放的是指向堆中数据的指针或引用，继承自System.Object,堆中的内存由GC释放。
string，数组以及类 都属于引用类型
ref和outref 和 out 是函数参数的修饰符
作用：
使用ref 和 out修饰的 形参，在其内容改变后会影响到其实参的值，

通俗的来说，使用 ref 和 out 修饰形参后，函数内形参的值变为多少 ，实参的值也变为多少

区别：

ref 作为实参时，必须进行初始化，而out 则不用。
out 作为形参时，必须在函数内部进行赋值，而ref 不用

params 关键字(变长参数)使用params 关键字可以让传入函数的数组长度不固定
12345static int Sum(params int[] arr)&#123;    &#125;sum(1,2,3,4,5,...,10);
注意事项

params 关键 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/blog/Unity%E5%9F%BA%E7%A1%80%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/" title="Unity基础程序框架">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity基础程序框架"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/Unity%E5%9F%BA%E7%A1%80%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/" title="Unity基础程序框架">Unity基础程序框架</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-17T03:07:29.000Z" title="发表于 2022-06-17 11:07:29">2022-06-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Unity/">Unity</a></span></div><div class="content">前言当我们创建一个Unity工程准备做项目时，就要创建一些必要的文件夹

Resouces文件夹：一般将需要动态加载的资源放到这下面
Scripts文件夹：存放脚本的文件夹
Scenes文件夹：存放场景
ArtRes文件夹：存放艺术资源


由于打包时，会将Resources下的所有文件全部打包到exe中，所以我们只会在Resources文件夹下存放少量需要使用的素材。而其它大量的素材是存放到ArtRes文件夹下的

单例模式基类模块单例模式
意图：保证一个类仅有一个实例，并提供一个访问它的全局访问点
主要解决：避免一个全局使用的类，被频繁地创建与销毁
使用场景：控制实例数目，节省系统资源的时候
应用实例：

游戏管理器：一般会把游戏当中的唯一的一个管理者设置为单例模式
怪物管理器等管理类

123456789101112131415161718192021void Start()&#123;    //只要通过该方法调用，得到的就是唯一的对象    GameManager.GetInstance();&#125;public class GameManager&#123;    // ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/blog/Unity%E6%A0%B8%E5%BF%83/" title="Unity核心">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity核心"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/Unity%E6%A0%B8%E5%BF%83/" title="Unity核心">Unity核心</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-17T03:05:34.000Z" title="发表于 2022-06-17 11:05:34">2022-06-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Unity/">Unity</a></span></div><div class="content">图片导入设置图片导入概述Unity中使用最多的图片格式是：JPG、PNG、TGA 三种
图片设置的6大部分


纹理类型
纹理形状
高级设置
平铺拉伸
平台窗口
预览窗口

纹理类型设置
设置纹理类型主要是为了让纹理图片有不同的主要用途

default：默认贴图纹理，大部分导入的模型贴图都是该类型

sRGB：默认勾选，作用是让我们看到的颜色更自然
Alpha Source：指定如何生成纹理的Alpha通道
None：无论输入纹理是否有Alpha通道，导入的纹理都没有Alpha通道
Input Texture Alpha：输入纹理中的Alpha。适用于带Alpha通道的图片


Alpha Is Transparency：启用可以避免边缘上的过滤瑕疵


Normal map：法线贴图纹理

Editor GUI：编辑GUI

Sprite：2D游戏和UI相关内容



SpriteSpriteEditorSpriteEditor 是精灵图片编辑器，主要用于编辑2D游戏开发时 使用的Sprite精灵图片
作用：
主要用于编辑图集中提取元素、设置精灵边框、设置九宫格、设置轴心等功能

 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/blog/Unity-3d%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/" title="Unity-3d数学基础">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-3d数学基础"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/Unity-3d%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/" title="Unity-3d数学基础">Unity-3d数学基础</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-17T03:04:03.000Z" title="发表于 2022-06-17 11:04:03">2022-06-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Unity/">Unity</a></span></div><div class="content">[TOC]
1、3D数学基础1.1 Mathf知识点一：Mathf和Math

Math是C#中封装好的，用于数学计算的工具类，位于System命名空间中
Mathf是Unity中封装好的，用于数学计算的工具结构体，位于UnityEngine命名空间中

知识点二：两者的区别

Mathf 是Unity专门封装的，不仅包含了Math中的方法，还多了适用于游戏开发的方法
所以在Unity中一般用Mathf 进行游戏开发

知识点三：Mathf中的常用方法，一般只计算一次

PI

1print(Mathf.PI);

取绝对值-Abs

1print(Mathf.Abs(-1));

向上取整-CeilToInt

12float f = 1.3f;print(Mathf.CeilToInt(f));	//得到2

向下取整-FloorToInt

1print(Mathf.FloorToInt(f));	//得到1，强转也是向下取整

钳制函数-Clamp

12//Clamp(x,y,z) y，z分别为最小和最大值，若x值过了该区间，则会取临界的值print(Mathf.Clamp( ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/blog/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%BE%8E-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE02/" title="二分查找（下）：如何快速定位IP对应的省份地址？">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二分查找（下）：如何快速定位IP对应的省份地址？"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%BE%8E-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE02/" title="二分查找（下）：如何快速定位IP对应的省份地址？">二分查找（下）：如何快速定位IP对应的省份地址？</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-11T23:36:41.000Z" title="发表于 2022-06-12 07:36:41">2022-06-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></span></div><div class="content">四种常见的二分查找变形问题1、查找第一个值等于定值的元素有序数据集合中存在重复的数据，我们希望找到第一个值等于给定值的数据
假如下面这样一个有序数组，其中，a[5]，a[6]，a[7] 的值都等于 8，是重复的数据。我们希望查找第一个等于 8 的数据，也就是下标是 5 的元素

如果我们用之前的二分查找代码
1234567891011121314151617int bsearch(int a[], int n, int value)&#123;    int low = 0;    int high = n - 1;    while(low &lt;= high)&#123;        int mid = low + (high - low)/2;        if(a[mid] == value)&#123;            return a[mid];        &#125;        else if(a[mid] &lt; value)&#123;            low = mid + 1;        &#125;        else&#12 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/blog/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%BE%8E-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE01/" title="二分查找（上）：如何用最省内存的方式实现快速查找功能？">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二分查找（上）：如何用最省内存的方式实现快速查找功能？"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%BE%8E-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE01/" title="二分查找（上）：如何用最省内存的方式实现快速查找功能？">二分查找（上）：如何用最省内存的方式实现快速查找功能？</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-10T00:14:47.000Z" title="发表于 2022-06-10 08:14:47">2022-06-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></span></div><div class="content">如何理解二分查找二分查找，又叫折半查找，它的思想是每次查找有序序列中的中间值，然后再判断该值与目标值的大小。如果大于目标值，则说明目标值在左半区间，反之，则在右半区间。不断重复上述操作，直到查找完成为止
假设我要在0~99的数字之间，查找23，则如下图所示

总结：二分查找是针对有序的数据集合，每次都能通过中间值与目标值对比，将待查区间的范围缩小一半，直到找到目标值，或区间被缩小为0时停止
它的时间复杂度是O(log n)，效率非常高
二分查找的递归与非递归实现示例1：有序数组中不存在重复元素，用二分查找给定的数据
12345678910111213141516171819int bsearch(int[] a, int n, int value)&#123;    int low = 0;	//左区间下标开始为0    int high = n - 1;//右区间下标开始为n-1        while(low &lt;= high)&#123;	//注意：不是 low &lt; high        //注意：不是mid=(low+high)/2,因为如果low和high比较大 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/blog/Games101-04%E6%8E%A7%E5%88%B6%E8%BD%AC%E6%8D%A2/" title="Games101-04控制转换">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Games101-04控制转换"></a></div><div class="recent-post-info"><a class="article-title" href="/blog/Games101-04%E6%8E%A7%E5%88%B6%E8%BD%AC%E6%8D%A2/" title="Games101-04控制转换">Games101-04控制转换</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-09T13:24:02.000Z" title="发表于 2022-06-09 21:24:02">2022-06-09</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80/">图形学基础</a></span></div><div class="content">3D 变换特定旋转当我们的物体在三维空间绕着x、y、z轴旋转时，只有对应轴的坐标会保持不变

用矩阵的表示方式如下
绕着x轴旋转，所以x轴坐标不会变，则矩阵的第一行和第一列都是1 0 0 
然后其中2×2的矩阵，就是对y、z进行旋转
绕着y轴旋转也是痛苦，矩阵的第二行和第二轮都是 1 0 0
然后周围的2×2矩阵，是对x、z进行旋转
总之就是哪个轴坐标不变，对应的行列就是 1 0 0，然后剩下的2×2矩阵就是对其它轴的旋转
在这里我们定义的是x叉乘z得到y。所以在矩阵中x和z的sin相同，而它们与z的sin相反


复合旋转我们可以将复杂的旋转，转换为通过特定旋转的组合形式

也就是将复杂的旋转，转换为绕x、y、z轴的组合
这也是下述公式的含义


在数学上，我们将上述公式中的α，β，γ，三个角称之为欧拉角

可以通过飞机抬头、平移、侧移的方法形象的理解欧拉角
飞机的任何旋转，都能分解为上述的三个动作
如下图所示


公式：将任意的旋转通过分解为三个欧拉角的方式，写成一个矩阵

观测变换观测变化包含视图变换和投影变换。其中投影变换又分为正交投影和透视投影
</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img1.baidu.com/it/u=223483055,1110828441&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=400&amp;h=400" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Chou</div><div class="author-info__description">这个人很懒，什么也没有写~</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div><a class="button--animated" id="card-info-btn" href="https://github.com/zYidian"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:a790623778@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">你这个年纪怎么睡得着jio？</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/Json%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/" title="Json数据持久化"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Json数据持久化"/></a><div class="content"><a class="title" href="/blog/Json%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/" title="Json数据持久化">Json数据持久化</a><time datetime="2022-07-06T13:33:49.000Z" title="发表于 2022-07-06 21:33:49">2022-07-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/Unity-Demo/" title="Unity-Demo"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-Demo"/></a><div class="content"><a class="title" href="/blog/Unity-Demo/" title="Unity-Demo">Unity-Demo</a><time datetime="2022-07-04T23:29:10.000Z" title="发表于 2022-07-05 07:29:10">2022-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/Unity-UGUI-Demo/" title="Unity-UGUI_Demo"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-UGUI_Demo"/></a><div class="content"><a class="title" href="/blog/Unity-UGUI-Demo/" title="Unity-UGUI_Demo">Unity-UGUI_Demo</a><time datetime="2022-06-29T13:23:20.000Z" title="发表于 2022-06-29 21:23:20">2022-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/C-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85/" title="C#知识点补充"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C#知识点补充"/></a><div class="content"><a class="title" href="/blog/C-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85/" title="C#知识点补充">C#知识点补充</a><time datetime="2022-06-19T12:02:04.000Z" title="发表于 2022-06-19 20:02:04">2022-06-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/Unity%E5%9F%BA%E7%A1%80%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/" title="Unity基础程序框架"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/media/top_img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity基础程序框架"/></a><div class="content"><a class="title" href="/blog/Unity%E5%9F%BA%E7%A1%80%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/" title="Unity基础程序框架">Unity基础程序框架</a><time datetime="2022-06-17T03:07:29.000Z" title="发表于 2022-06-17 11:07:29">2022-06-17</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85/"><span class="card-category-list-name">C#知识点补充</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C-%E6%80%BB%E7%BB%93/"><span class="card-category-list-name">C++总结</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C-%E7%AC%94%E8%AE%B0/"><span class="card-category-list-name">C++笔记</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-%E4%BE%AF%E6%8D%B7/"><span class="card-category-list-name">C++面向对象_侯捷</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Unity/"><span class="card-category-list-name">Unity</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80/"><span class="card-category-list-name">图形学基础</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="card-category-list-name">数据结构</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%AE%97%E6%B3%95/"><span class="card-category-list-name">算法</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.1em; color: #999">C#</a> <a href="/tags/C/" style="font-size: 1.5em; color: #99a9bf">C++</a> <a href="/tags/Json/" style="font-size: 1.1em; color: #999">Json</a> <a href="/tags/Lua/" style="font-size: 1.1em; color: #999">Lua</a> <a href="/tags/UGUI/" style="font-size: 1.1em; color: #999">UGUI</a> <a href="/tags/Unity/" style="font-size: 1.4em; color: #99a5b6">Unity</a> <a href="/tags/games101/" style="font-size: 1.2em; color: #999da3">games101</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.3em; color: #99a1ac">数据结构</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.1em; color: #999">笔记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.4em; color: #99a5b6">算法</a> <a href="/tags/%E9%9D%A2%E7%BB%8F/" style="font-size: 1.2em; color: #999da3">面经</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">13</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">37</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-09-09T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">92k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-07-08T09:38:40.813Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Chou</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "再学亿点点。,Knowledge comes from experience alone.,世间无所谓天才，它仅是刻苦加勤奋。,There is no such thing as genius; it is nothing but labour and diligence.".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '再学亿点点。'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script></div><div class="aplayer no-destroy" data-id="7675104902" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2d_models/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2d_models/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2d_models/assets/wanko.model.json"},"display":{"position":"left","width":100,"height":150,"hOffset":-10,"vOffset":40},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body></html>